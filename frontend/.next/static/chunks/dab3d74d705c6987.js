(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,556,(e,t,r)=>{t.exports=e.r(15043)},45478,e=>{"use strict";e.s(["default",()=>r]);let t="http://127.0.0.1:8000";async function r(){let e=sessionStorage.getItem("token"),r=await fetch("".concat(t,"/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(!r.ok){let e=sessionStorage.getItem("refresh_token"),r=await fetch("".concat(t,"/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e})});if(!r.ok)throw Error("Failed to refresh token");let s=await r.json();return sessionStorage.setItem("token",s.access_token),s}return await r.json()}},57643,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(16247),r=e.i(27477),s=e.i(45478),o=e.i(556);let n="http://127.0.0.1:8000";function i(){let e=(0,o.useRouter)(),[i,a]=(0,r.useState)([]);async function c(){try{let e=await fetch("".concat(n,"/user/read_all"),{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();a(t),console.log(t)}catch(e){console.error("Error fetching users:",e)}}async function l(){"admin"!==(await (0,s.default)()).role&&(alert("관리자만 접근할 수 있습니다."),e.push("/"))}return(0,r.useEffect)(()=>{l(),c()},[]),(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"User List"}),(0,t.jsx)("button",{onClick:function(){e.push("/users/signup")},className:"mb-4 bg-blue-500 text-white px-4 py-2 rounded",children:"Create User"}),(0,t.jsx)("ul",{children:i.map(e=>(0,t.jsxs)("li",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{children:e.username}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void fetch("".concat(n,"/user/delete"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(()=>{a(e=>e.filter(e=>e.id!==t))}).catch(e=>{console.error("Error deleting user:",e)})},className:"bg-red-500 text-white px-2 py-1 rounded",children:"Delete"})]},e.id))})]})}}]);