module.exports=[72027,a=>{"use strict";a.s(["toFormData",()=>l]);var b=a.i(17265);a.i(47299),a.i(43698),a.i(27028),a.i(81111),a.i(51615),a.i(12057),a.i(15925),a.i(57764),a.i(61095),a.i(2157),a.i(50227);var c=Object.defineProperty,d=(a,b)=>c(a,"name",{value:b,configurable:!0});let e=0,f={START_BOUNDARY:e++,HEADER_FIELD_START:e++,HEADER_FIELD:e++,HEADER_VALUE_START:e++,HEADER_VALUE:e++,HEADER_VALUE_ALMOST_DONE:e++,HEADERS_ALMOST_DONE:e++,PART_DATA_START:e++,PART_DATA:e++,END:e++},g={PART_BOUNDARY:1,LAST_BOUNDARY:2},h=d(a=>32|a,"lower"),i=d(()=>{},"noop"),j=class{constructor(a){this.index=0,this.flags=0,this.onHeaderEnd=i,this.onHeaderField=i,this.onHeadersEnd=i,this.onHeaderValue=i,this.onPartBegin=i,this.onPartData=i,this.onPartEnd=i,this.boundaryChars={};let b=new Uint8Array((a=`\r
--`+a).length);for(let c=0;c<a.length;c++)b[c]=a.charCodeAt(c),this.boundaryChars[b[c]]=!0;this.boundary=b,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=f.START_BOUNDARY}write(a){let b,c,e=0,i=a.length,j=this.index,{lookbehind:k,boundary:l,boundaryChars:m,index:n,state:o,flags:p}=this,q=this.boundary.length,r=q-1,s=a.length,t=d(a=>{this[a+"Mark"]=e},"mark"),u=d(a=>{delete this[a+"Mark"]},"clear"),v=d((a,b,c,d)=>{(void 0===b||b!==c)&&this[a](d&&d.subarray(b,c))},"callback"),w=d((b,c)=>{let d=b+"Mark";d in this&&(c?(v(b,this[d],e,a),delete this[d]):(v(b,this[d],a.length,a),this[d]=0))},"dataCallback");for(e=0;e<i;e++)switch(b=a[e],o){case f.START_BOUNDARY:if(n===l.length-2){if(45===b)p|=g.LAST_BOUNDARY;else if(13!==b)return;n++;break}if(n-1==l.length-2){if(p&g.LAST_BOUNDARY&&45===b)o=f.END,p=0;else{if(p&g.LAST_BOUNDARY||10!==b)return;n=0,v("onPartBegin"),o=f.HEADER_FIELD_START}break}b!==l[n+2]&&(n=-2),b===l[n+2]&&n++;break;case f.HEADER_FIELD_START:o=f.HEADER_FIELD,t("onHeaderField"),n=0;case f.HEADER_FIELD:if(13===b){u("onHeaderField"),o=f.HEADERS_ALMOST_DONE;break}if(n++,45===b)break;if(58===b){if(1===n)return;w("onHeaderField",!0),o=f.HEADER_VALUE_START;break}if((c=h(b))<97||c>122)return;break;case f.HEADER_VALUE_START:if(32===b)break;t("onHeaderValue"),o=f.HEADER_VALUE;case f.HEADER_VALUE:13===b&&(w("onHeaderValue",!0),v("onHeaderEnd"),o=f.HEADER_VALUE_ALMOST_DONE);break;case f.HEADER_VALUE_ALMOST_DONE:if(10!==b)return;o=f.HEADER_FIELD_START;break;case f.HEADERS_ALMOST_DONE:if(10!==b)return;v("onHeadersEnd"),o=f.PART_DATA_START;break;case f.PART_DATA_START:o=f.PART_DATA,t("onPartData");case f.PART_DATA:if(j=n,0===n){for(e+=r;e<s&&!(a[e]in m);)e+=q;e-=r,b=a[e]}if(n<l.length)l[n]===b?(0===n&&w("onPartData",!0),n++):n=0;else if(n===l.length)n++,13===b?p|=g.PART_BOUNDARY:45===b?p|=g.LAST_BOUNDARY:n=0;else if(n-1===l.length)if(p&g.PART_BOUNDARY){if(n=0,10===b){p&=~g.PART_BOUNDARY,v("onPartEnd"),v("onPartBegin"),o=f.HEADER_FIELD_START;break}}else p&g.LAST_BOUNDARY&&45===b?(v("onPartEnd"),o=f.END,p=0):n=0;n>0?k[n-1]=b:j>0&&(v("onPartData",0,j,new Uint8Array(k.buffer,k.byteOffset,k.byteLength)),j=0,t("onPartData"),e--);break;case f.END:break;default:throw Error(`Unexpected state entered: ${o}`)}w("onHeaderField"),w("onHeaderValue"),w("onPartData"),this.index=n,this.state=o,this.flags=p}end(){if(this.state===f.HEADER_FIELD_START&&0===this.index||this.state===f.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==f.END)throw Error("MultipartParser.end(): stream ended unexpectedly")}};function k(a){let b=a.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!b)return;let c=b[2]||b[3]||"",d=c.slice(c.lastIndexOf("\\")+1);return(d=d.replace(/%22/g,'"')).replace(/&#(\d{4});/g,(a,b)=>String.fromCharCode(b))}async function l(a,c){let e,f,g,h,i,l;if(!/multipart/i.test(c))throw TypeError("Failed to fetch");let m=c.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!m)throw TypeError("no or bad content-type header, no multipart boundary");let n=new j(m[1]||m[2]),o=[],p=new b.FormData,q=d(a=>{g+=u.decode(a,{stream:!0})},"onPartData"),r=d(a=>{o.push(a)},"appendToFile"),s=d(()=>{let a=new b.File(o,l,{type:i});p.append(h,a)},"appendFileToFormData"),t=d(()=>{p.append(h,g)},"appendEntryToFormData"),u=new TextDecoder("utf-8");for await(let b of(u.decode(),n.onPartBegin=function(){n.onPartData=q,n.onPartEnd=t,e="",f="",g="",h="",i="",l=null,o.length=0},n.onHeaderField=function(a){e+=u.decode(a,{stream:!0})},n.onHeaderValue=function(a){f+=u.decode(a,{stream:!0})},n.onHeaderEnd=function(){if(f+=u.decode(),"content-disposition"===(e=e.toLowerCase())){let a=f.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);a&&(h=a[2]||a[3]||""),(l=k(f))&&(n.onPartData=r,n.onPartEnd=s)}else"content-type"===e&&(i=f);f="",e=""},a))n.write(b);return n.end(),p}d(j,"MultipartParser"),d(k,"_fileName"),d(l,"toFormData")}];

//# sourceMappingURL=07c10_node-fetch-native_dist_chunks_multipart-parser_mjs_3e0a93ed._.js.map