module.exports=[88033,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(4044).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/HandS/frontend/app/projects/[projectId]/notionRendering.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/HandS/frontend/app/projects/[projectId]/notionRendering.tsx <module evaluation>","default")},86609,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(4044).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/HandS/frontend/app/projects/[projectId]/notionRendering.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/HandS/frontend/app/projects/[projectId]/notionRendering.tsx","default")},24974,a=>{"use strict";a.i(88033);var b=a.i(86609);a.n(b)},92222,(a,b,c)=>{"use strict";var d=Object.prototype.hasOwnProperty,e="~";function f(){}function g(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function h(a,b,c,d,f){if("function"!=typeof c)throw TypeError("The listener must be a function");var h=new g(c,d||a,f),i=e?e+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function i(a,b){0==--a._eventsCount?a._events=new f:delete a._events[b]}function j(){this._events=new f,this._eventsCount=0}Object.create&&(f.prototype=Object.create(null),new f().__proto__||(e=!1)),j.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)d.call(a,b)&&c.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},j.prototype.listeners=function(a){var b=e?e+a:a,c=this._events[b];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,g=Array(f);d<f;d++)g[d]=c[d].fn;return g},j.prototype.listenerCount=function(a){var b=e?e+a:a,c=this._events[b];return c?c.fn?1:c.length:0},j.prototype.emit=function(a,b,c,d,f,g){var h=e?e+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,f),!0;case 6:return k.fn.call(k.context,b,c,d,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;case 4:k[j].fn.call(k[j].context,b,c,d);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},j.prototype.on=function(a,b,c){return h(this,a,b,c,!1)},j.prototype.once=function(a,b,c){return h(this,a,b,c,!0)},j.prototype.removeListener=function(a,b,c,d){var f=e?e+a:a;if(!this._events[f])return this;if(!b)return i(this,f),this;var g=this._events[f];if(g.fn)g.fn!==b||d&&!g.once||c&&g.context!==c||i(this,f);else{for(var h=0,j=[],k=g.length;h<k;h++)(g[h].fn!==b||d&&!g[h].once||c&&g[h].context!==c)&&j.push(g[h]);j.length?this._events[f]=1===j.length?j[0]:j:i(this,f)}return this},j.prototype.removeAllListeners=function(a){var b;return a?(b=e?e+a:a,this._events[b]&&i(this,b)):(this._events=new f,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=e,j.EventEmitter=j,b.exports=j},45254,a=>{"use strict";a.s(["default",()=>aj],45254);var b=a.i(41457),c=a.i(24974),d=a.i(99667),e=a.i(92222);e.default;e.default;let f=(a,b,c,d)=>{if("length"===c||"prototype"===c||"arguments"===c||"caller"===c)return;let e=Object.getOwnPropertyDescriptor(a,c),f=Object.getOwnPropertyDescriptor(b,c);(g(e,f)||!d)&&Object.defineProperty(a,c,f)},g=function(a,b){return void 0===a||a.configurable||a.writable===b.writable&&a.enumerable===b.enumerable&&a.configurable===b.configurable&&(a.writable||a.value===b.value)},h=(a,b)=>`/* Wrapped ${a}*/
${b}`,i=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),j=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),k=new WeakMap,l=new WeakMap,m=(a,b)=>b.some(b=>b instanceof RegExp?b.test(a):b===a),n=new Set(["https:","http:","file:"]);var o=/\b([\da-f]{32})\b/,p=/\b([\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12})\b/,q=(a="",{uuid:b=!0}={})=>{if(!a||!(a=a.split("?")[0]))return;let c=a.match(o);if(c)return b?((a="")=>`${a.slice(0,8)}-${a.slice(8,12)}-${a.slice(12,16)}-${a.slice(16,20)}-${a.slice(20)}`)(c[1]):c[1];let d=a.match(p);if(d)return b?d[1]:d[1].replaceAll("-","")},r=(a,b)=>{let c=b||Object.keys(a.block)[0],d=new Set;return!function b(e){var f,g,h,i,j,k;if(d.has(e))return;d.add(e);let l=null==(f=a.block[e])?void 0:f.value;if(!l)return;let{content:m,type:n,properties:o,format:p}=l;if(o)for(let a of Object.keys(o)){let c=o[a];if(!c)continue;for(let a of c){let c=null==(h=null==(g=null==a?void 0:a[0])?void 0:g[1])?void 0:h[0];(null==c?void 0:c[0])==="p"&&c[1]&&b(c[1])}let d=null==(j=null==(i=null==c?void 0:c[0])?void 0:i[1])?void 0:j[0];(null==d?void 0:d[0])==="p"&&d[1]&&b(d[1])}if(p){let a=null==(k=p.transclusion_reference_pointer)?void 0:k.id;a&&b(a)}if(m&&Array.isArray(m)&&(e===c||"page"!==n&&"collection_view_page"!==n))for(let a of m)b(a)}(c),Array.from(d)},s=function(a,{cacheKey:b,cache:c=new Map,maxAge:d}={}){if(0===d)return a;if("number"==typeof d){if(d>0x7fffffff)throw TypeError("The `maxAge` option cannot exceed 2147483647.");if(d<0)throw TypeError("The `maxAge` option should not be a negative number.")}let e=function(...e){let f=b?b(e):e[0],g=c.get(f);if(g)return g.data;let h=a.apply(this,e),i="function"==typeof d?d(...e):d;if(c.set(f,{data:h,maxAge:i?Date.now()+i:1/0}),i&&i>0&&i!==1/0){let b=setTimeout(()=>{c.delete(f)},i);b.unref?.();let d=l.get(a)??new Set;d.add(b),l.set(a,d)}return h};return!function(a,b,{ignoreNonConfigurable:c=!1}={}){let{name:d}=a;for(let d of Reflect.ownKeys(b))f(a,b,d,c);let e=Object.getPrototypeOf(b);e!==Object.getPrototypeOf(a)&&Object.setPrototypeOf(a,e);let g=""===d?"":`with ${d.trim()}() `,k=h.bind(null,g,b.toString());Object.defineProperty(k,"name",j);let{writable:l,enumerable:m,configurable:n}=i;Object.defineProperty(a,"toString",{value:k,writable:l,enumerable:m,configurable:n})}(e,a,{ignoreNonConfigurable:!0}),k.set(e,c),e}(a=>{if(!a)return"";try{if(a.startsWith("https://www.notion.so/image/")){let b=new URL(a),c=decodeURIComponent(b.pathname.slice(7)),d=s(c);b.pathname=`/image/${encodeURIComponent(d)}`,a=b.toString()}return function(a,b){if("string"!=typeof(b={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,removePath:!1,transformPath:!1,...b}).defaultProtocol||b.defaultProtocol.endsWith(":")||(b.defaultProtocol=`${b.defaultProtocol}:`),a=a.trim(),/^data:/i.test(a))return((a,{stripHash:b})=>{let c=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(a);if(!c)throw Error(`Invalid URL: ${a}`);let{type:d,data:e,hash:f}=c.groups,g=d.split(";");f=b?"":f;let h=!1;"base64"===g[g.length-1]&&(g.pop(),h=!0);let i=g.shift()?.toLowerCase()??"",j=[...g.map(a=>{let[b,c=""]=a.split("=").map(a=>a.trim());return"charset"===b&&"us-ascii"===(c=c.toLowerCase())?"":`${b}${c?`=${c}`:""}`}).filter(Boolean)];return h&&j.push("base64"),(j.length>0||i&&"text/plain"!==i)&&j.unshift(i),`data:${j.join(";")},${h?e.trim():e}${f?`#${f}`:""}`})(a,b);if((a=>{try{let{protocol:b}=new URL(a);return b.endsWith(":")&&!b.includes(".")&&!n.has(b)}catch{return!1}})(a))return a;let c=a.startsWith("//");!c&&/^\.*\//.test(a)||(a=a.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,b.defaultProtocol));let d=new URL(a);if(b.forceHttp&&b.forceHttps)throw Error("The `forceHttp` and `forceHttps` options cannot be used together");if(b.forceHttp&&"https:"===d.protocol&&(d.protocol="http:"),b.forceHttps&&"http:"===d.protocol&&(d.protocol="https:"),b.stripAuthentication&&(d.username="",d.password=""),b.stripHash?d.hash="":b.stripTextFragment&&(d.hash=d.hash.replace(/#?:~:text.*?$/i,"")),d.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,b=0,c="";for(;;){let e=a.exec(d.pathname);if(!e)break;let f=e[0],g=e.index;c+=d.pathname.slice(b,g).replace(/\/{2,}/g,"/"),c+=f,b=g+f.length}c+=d.pathname.slice(b,d.pathname.length).replace(/\/{2,}/g,"/"),d.pathname=c}if(d.pathname)try{d.pathname=decodeURI(d.pathname).replace(/\\/g,"%5C")}catch{}if(!0===b.removeDirectoryIndex&&(b.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(b.removeDirectoryIndex)&&b.removeDirectoryIndex.length>0){let a=d.pathname.split("/");m(a[a.length-1],b.removeDirectoryIndex)&&(d.pathname=(a=a.slice(0,-1)).slice(1).join("/")+"/")}if(b.removePath&&(d.pathname="/"),b.transformPath&&"function"==typeof b.transformPath){let a=d.pathname.split("/").filter(Boolean),c=b.transformPath(a);d.pathname=c?.length>0?`/${c.join("/")}`:"/"}if(d.hostname&&(d.hostname=d.hostname.replace(/\.$/,""),b.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(d.hostname)&&(d.hostname=d.hostname.replace(/^www\./,""))),Array.isArray(b.removeQueryParameters))for(let a of[...d.searchParams.keys()])m(a,b.removeQueryParameters)&&d.searchParams.delete(a);if(Array.isArray(b.keepQueryParameters)||!0!==b.removeQueryParameters||(d.search=""),Array.isArray(b.keepQueryParameters)&&b.keepQueryParameters.length>0)for(let a of[...d.searchParams.keys()])m(a,b.keepQueryParameters)||d.searchParams.delete(a);if(b.sortQueryParameters){let a=d.search;d.searchParams.sort();try{d.search=decodeURIComponent(d.search)}catch{}for(let b of a.slice(1).split("&").filter(a=>a&&!a.includes("="))){let a=decodeURIComponent(b);d.search=d.search.replace(`?${a}=`,`?${a}`).replace(`&${a}=`,`&${a}`)}}b.removeTrailingSlash&&(d.pathname=d.pathname.replace(/\/$/,"")),b.removeExplicitPort&&d.port&&(d.port="");let e=a;return a=d.toString(),b.removeSingleSlash||"/"!==d.pathname||e.endsWith("/")||""!==d.hash||(a=a.replace(/\/$/,"")),(b.removeTrailingSlash||"/"===d.pathname)&&""===d.hash&&b.removeSingleSlash&&(a=a.replace(/\/$/,"")),c&&!b.normalizeProtocol&&(a=a.replace(/^http:\/\//,"//")),b.stripProtocol&&(a=a.replace(/^(?:https?:)?\/\//,"")),a}(a,{stripProtocol:!0,stripWWW:!0,stripHash:!0,stripTextFragment:!0,removeQueryParameters:!0})}catch(a){return""}}),t=a.i(47299),u=a.i(43698),v=a.i(17265);a.i(27028),a.i(81111),a.i(51615),a.i(12057),a.i(15925),a.i(57764),a.i(61095),a.i(2157),a.i(50227);let w=!!globalThis.process?.env?.FORCE_NODE_FETCH,x=!w&&globalThis.fetch||v.fetch,y=(!w&&globalThis.Blob||v.Blob,!w&&globalThis.File||v.File,!w&&globalThis.FormData||v.FormData,!w&&globalThis.Headers||v.Headers),z=(!w&&globalThis.Request||v.Request,!w&&globalThis.Response||v.Response,!w&&globalThis.AbortController||v.AbortController),A=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,B=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,C=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function D(a,b){var c;return"__proto__"===a||"constructor"===a&&b&&"object"==typeof b&&"prototype"in b?void(c=a,console.warn(`[destr] Dropping "${c}" key to prevent prototype pollution.`)):b}function E(a,b={}){if("string"!=typeof a)return a;if('"'===a[0]&&'"'===a[a.length-1]&&-1===a.indexOf("\\"))return a.slice(1,-1);let c=a.trim();if(c.length<=9)switch(c.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return NaN;case"infinity":return 1/0;case"-infinity":return-1/0}if(!C.test(a)){if(b.strict)throw SyntaxError("[destr] Invalid JSON");return a}try{if(A.test(a)||B.test(a)){if(b.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(a,D)}return JSON.parse(a)}catch(c){if(b.strict)throw c;return a}}let F=/#/g,G=/&/g,H=/\//g,I=/=/g,J=/\+/g,K=/%5e/gi,L=/%60/gi,M=/%7c/gi,N=/%20/gi;function O(a){return encodeURI(""+("string"==typeof a?a:JSON.stringify(a))).replace(M,"|").replace(J,"%2B").replace(N,"+").replace(F,"%23").replace(G,"%26").replace(L,"`").replace(K,"^").replace(H,"%2F")}function P(a){return O(a).replace(I,"%3D")}function Q(a=""){try{return decodeURIComponent(""+a)}catch{return""+a}}let R=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,S=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,T=/^([/\\]\s*){2,}[^/\\]/,U=/\/$|\/\?|\/#/,V=/^\.?\//;function W(a,b={}){return("boolean"==typeof b&&(b={acceptRelative:b}),b.strict)?R.test(a):S.test(a)||!!b.acceptRelative&&T.test(a)}let X=Symbol.for("ufo:protocolRelative");function Y(a=""){let[b="",c="",d=""]=(a.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:b,search:c,hash:d}}class Z extends Error{constructor(a,b){super(a,b),this.name="FetchError",b?.cause&&!this.cause&&(this.cause=b.cause)}}let $=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function _(a="GET"){return $.has(a.toUpperCase())}let aa=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ab=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;async function ac(a,b){if(b)if(Array.isArray(b))for(let c of b)await c(a);else await b(a)}let ad=new Set([408,409,425,429,500,502,503,504]),ae=new Set([101,204,205,304]),af=function a(b={}){let{fetch:c=globalThis.fetch,Headers:d=globalThis.Headers,AbortController:e=globalThis.AbortController}=b;async function f(a){let b=a.error&&"AbortError"===a.error.name&&!a.options.timeout||!1;if(!1!==a.options.retry&&!b){let b;b="number"==typeof a.options.retry?a.options.retry:+!_(a.options.method);let c=a.response&&a.response.status||500;if(b>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(c):ad.has(c))){let c="function"==typeof a.options.retryDelay?a.options.retryDelay(a):a.options.retryDelay||0;return c>0&&await new Promise(a=>setTimeout(a,c)),g(a.request,{...a.options,retry:b-1})}}let c=function(a){let b=a.error?.message||a.error?.toString()||"",c=a.request?.method||a.options?.method||"GET",d=a.request?.url||String(a.request)||"/",e=`[${c}] ${JSON.stringify(d)}`,f=a.response?`${a.response.status} ${a.response.statusText}`:"<no response>",g=new Z(`${e}: ${f}${b?` ${b}`:""}`,a.error?{cause:a.error}:void 0);for(let b of["request","options","response"])Object.defineProperty(g,b,{get:()=>a[b]});for(let[b,c]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(g,b,{get:()=>a.response&&a.response[c]});return g}(a);throw Error.captureStackTrace&&Error.captureStackTrace(c,g),c}let g=async function(a,g={}){let h,i={request:a,options:function(a,b,c,d){let e,f=function(a,b,c){if(!b)return new c(a);let d=new c(b);if(a)for(let[b,e]of Symbol.iterator in a||Array.isArray(a)?a:new c(a))d.set(b,e);return d}(b?.headers??a?.headers,c?.headers,d);return(c?.query||c?.params||b?.params||b?.query)&&(e={...c?.params,...c?.query,...b?.params,...b?.query}),{...c,...b,query:e,params:e,headers:f}}(a,g,b.defaults,d),response:void 0,error:void 0};if(i.options.method&&(i.options.method=i.options.method.toUpperCase()),i.options.onRequest&&await ac(i,i.options.onRequest),"string"==typeof i.request&&(i.options.baseURL&&(i.request=function(a,b){var c;if(!(c=b)||"/"===c||W(a))return a;let d=function(a="",b){return(!function(a="",b){return a.endsWith("/")}(a)?a:a.slice(0,-1))||"/"}(b);return a.startsWith(d)?a:function(a,...b){let c=a||"";for(let a of b.filter(a=>a&&"/"!==a))if(c){let b=a.replace(V,"");c=function(a="",b){return a.endsWith("/")?a:a+"/"}(c)+b}else c=a;return c}(d,a)}(i.request,i.options.baseURL)),i.options.query&&(i.request=function(a,b){let c=function a(b="",c){let d=b.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(d){let[,a,b=""]=d;return{protocol:a.toLowerCase(),pathname:b,href:a+b,auth:"",host:"",search:"",hash:""}}if(!W(b,{acceptRelative:!0}))return c?a(c+b):Y(b);let[,e="",f,g=""]=b.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,h="",i=""]=g.match(/([^#/?]*)(.*)?/)||[];"file:"===e&&(i=i.replace(/\/(?=[A-Za-z]:)/,""));let{pathname:j,search:k,hash:l}=Y(i);return{protocol:e.toLowerCase(),auth:f?f.slice(0,Math.max(0,f.length-1)):"",host:h,pathname:j,search:k,hash:l,[X]:!e}}(a),d={...function(a=""){let b=Object.create(null);for(let c of("?"===a[0]&&(a=a.slice(1)),a.split("&"))){let a=c.match(/([^=]+)=?(.*)/)||[];if(a.length<2)continue;let d=Q(a[1].replace(J," "));if("__proto__"===d||"constructor"===d)continue;let e=Q((a[2]||"").replace(J," "));void 0===b[d]?b[d]=e:Array.isArray(b[d])?b[d].push(e):b[d]=[b[d],e]}return b}(c.search),...b};return c.search=Object.keys(d).filter(a=>void 0!==d[a]).map(a=>{var b;return(("number"==typeof(b=d[a])||"boolean"==typeof b)&&(b=String(b)),b)?Array.isArray(b)?b.map(b=>`${P(a)}=${O(b)}`).join("&"):`${P(a)}=${O(b)}`:P(a)}).filter(Boolean).join("&"),function(a){let b=a.pathname||"",c=a.search?(a.search.startsWith("?")?"":"?")+a.search:"",d=a.hash||"",e=a.auth?a.auth+"@":"",f=a.host||"";return(a.protocol||a[X]?(a.protocol||"")+"//":"")+e+f+b+c+d}(c)}(i.request,i.options.query),delete i.options.query),"query"in i.options&&delete i.options.query,"params"in i.options&&delete i.options.params),i.options.body&&_(i.options.method)&&(!function(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}(i.options.body)?("pipeTo"in i.options.body&&"function"==typeof i.options.body.pipeTo||"function"==typeof i.options.body.pipe)&&!("duplex"in i.options)&&(i.options.duplex="half"):(i.options.body="string"==typeof i.options.body?i.options.body:JSON.stringify(i.options.body),i.options.headers=new d(i.options.headers||{}),i.options.headers.has("content-type")||i.options.headers.set("content-type","application/json"),i.options.headers.has("accept")||i.options.headers.set("accept","application/json"))),!i.options.signal&&i.options.timeout){let a=new e;h=setTimeout(()=>{let b=Error("[TimeoutError]: The operation was aborted due to timeout");b.name="TimeoutError",b.code=23,a.abort(b)},i.options.timeout),i.options.signal=a.signal}try{i.response=await c(i.request,i.options)}catch(a){return i.error=a,i.options.onRequestError&&await ac(i,i.options.onRequestError),await f(i)}finally{h&&clearTimeout(h)}if((i.response.body||i.response._bodyInit)&&!ae.has(i.response.status)&&"HEAD"!==i.options.method){let a=(i.options.parseResponse?"json":i.options.responseType)||function(a=""){if(!a)return"json";let b=a.split(";").shift()||"";return ab.test(b)?"json":aa.has(b)||b.startsWith("text/")?"text":"blob"}(i.response.headers.get("content-type")||"");switch(a){case"json":{let a=await i.response.text(),b=i.options.parseResponse||E;i.response._data=b(a);break}case"stream":i.response._data=i.response.body||i.response._bodyInit;break;default:i.response._data=await i.response[a]()}}return(i.options.onResponse&&await ac(i,i.options.onResponse),!i.options.ignoreResponseError&&i.response.status>=400&&i.response.status<600)?(i.options.onResponseError&&await ac(i,i.options.onResponseError),await f(i)):i.response},h=async function(a,b){return(await g(a,b))._data};return h.raw=g,h.native=(...a)=>c(...a),h.create=(c={},d={})=>a({...b,...d,defaults:{...b.defaults,...d.defaults,...c}}),h}({fetch:globalThis.fetch?(...a)=>globalThis.fetch(...a):function(){if(!JSON.parse(process.env.FETCH_KEEP_ALIVE||"false"))return x;let a={keepAlive:!0},b=new t.default.Agent(a),c=new u.default.Agent(a),d={agent:a=>"http:"===a.protocol?b:c};return function(a,b){return x(a,{...d,...b})}}(),Headers:globalThis.Headers||y,AbortController:globalThis.AbortController||z});async function ag(a,b,{concurrency:c=1/0,stopOnError:d=!0,signal:e}={}){return new Promise((f,g)=>{if(void 0===a[Symbol.iterator]&&void 0===a[Symbol.asyncIterator])throw TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof a})`);if("function"!=typeof b)throw TypeError("Mapper function is required");if(!(Number.isSafeInteger(c)&&c>=1||c===1/0))throw TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${c}\` (${typeof c})`);let h=[],i=[],j=new Map,k=!1,l=!1,m=!1,n=0,o=0,p=void 0===a[Symbol.iterator]?a[Symbol.asyncIterator]():a[Symbol.iterator](),q=()=>{t(e.reason)},r=()=>{e?.removeEventListener("abort",q)},s=a=>{f(a),r()},t=a=>{k=!0,l=!0,g(a),r()};e&&(e.aborted&&t(e.reason),e.addEventListener("abort",q,{once:!0}));let u=async()=>{if(l)return;let a=await p.next(),c=o;if(o++,a.done){if(m=!0,0===n&&!l){if(!d&&i.length>0)return void t(AggregateError(i));if(l=!0,0===j.size)return void s(h);let a=[];for(let[b,c]of h.entries())j.get(b)!==ah&&a.push(c);s(a)}return}n++,(async()=>{try{let d=await a.value;if(l)return;let e=await b(d,c);e===ah&&j.set(c,e),h[c]=e,n--,await u()}catch(a){if(d)t(a);else{i.push(a),n--;try{await u()}catch(a){t(a)}}}})()};(async()=>{for(let a=0;a<c;a++){try{await u()}catch(a){t(a);break}if(m||k)break}})()})}let ah=Symbol("skip"),ai=new class{_apiBaseUrl;_authToken;_activeUser;_userTimeZone;_ofetchOptions;constructor({apiBaseUrl:a="https://www.notion.so/api/v3",authToken:b,activeUser:c,userTimeZone:d="America/New_York",ofetchOptions:e}={}){this._apiBaseUrl=a,this._authToken=b,this._activeUser=c,this._userTimeZone=d,this._ofetchOptions=e}async getPage(a,{concurrency:b=3,fetchMissingBlocks:c=!0,fetchCollections:d=!0,signFileUrls:e=!0,chunkLimit:f=100,chunkNumber:g=0,throwOnCollectionErrors:h=!1,collectionReducerLimit:i=999,fetchRelationPages:j=!1,ofetchOptions:k}={}){let l=await this.getPageRaw(a,{chunkLimit:f,chunkNumber:g,ofetchOptions:k}),m=l?.recordMap;if(!m?.block)throw Error(`Notion page not found "${a.replaceAll("-","")}"`);if(m.collection=m.collection??{},m.collection_view=m.collection_view??{},m.notion_user=m.notion_user??{},m.collection_query={},m.signed_urls={},c)for(;;){let a=r(m).filter(a=>!m.block[a]);if(!a.length)break;let b=await this.getBlocks(a,k).then(a=>a.recordMap.block);m.block={...m.block,...b}}let n=r(m);if(d){let c=n.flatMap(a=>{let b=m.block[a]?.value,c=b&&("collection_view"===b.type||"collection_view_page"===b.type)&&function(a,b){var c,d,e,f,g,h,i;let j=a.collection_id||(null==(d=null==(c=a.format)?void 0:c.collection_pointer)?void 0:d.id);if(j)return j;let k=null==(e=null==a?void 0:a.view_ids)?void 0:e[0];if(k){let a=null==(g=null==(f=b.collection_view)?void 0:f[k])?void 0:g.value;if(a)return null==(i=null==(h=a.format)?void 0:h.collection_pointer)?void 0:i.id}return null}(b,m);return c?b.view_ids?.map(a=>({collectionId:c,collectionViewId:a})):[]});await ag(c,async b=>{let{collectionId:c,collectionViewId:d}=b,e=m.collection_view[d]?.value;try{let a=await this.getCollectionData(c,d,e,{limit:i,ofetchOptions:k});m.block={...m.block,...a.recordMap.block},m.collection={...m.collection,...a.recordMap.collection},m.collection_view={...m.collection_view,...a.recordMap.collection_view},m.notion_user={...m.notion_user,...a.recordMap.notion_user},m.collection_query[c]={...m.collection_query[c],[d]:a.result?.reducerResults}}catch(b){if(console.warn("NotionAPI collectionQuery error",{pageId:a,collectionId:c,collectionViewId:d},b.message),h)throw b;console.error(b)}},{concurrency:b})}if(e&&await this.addSignedUrls({recordMap:m,contentBlockIds:n,ofetchOptions:k}),j){let a=await this.fetchRelationPages(m,k);m.block={...m.block,...a}}return m}fetchRelationPages=async(a,b)=>{for(let c=0;c<10;++c){let c=new Set;for(let b of Object.keys(a.block)){let d=a.block[b]?.value;if(d?.parent_table==="collection"&&d?.parent_id){let b=a.collection[d.parent_id]?.value;if(b?.schema)for(let a of this.extractRelationPageIdsFromBlock(d,b.schema))c.add(a)}}let d=Array.from(c).filter(b=>!a.block[b]?.value);if(!d.length)break;try{let c=await this.getBlocks(d,b).then(a=>a.recordMap.block);a.block={...a.block,...c}}catch(a){console.warn("NotionAPI getBlocks error during fetchRelationPages:",a)}}return a.block};extractRelationPageIdsFromBlock=(a,b)=>{let c=new Set;for(let d of Object.keys(a.properties||{})){let e=b[d];if(e?.type==="relation"){let b=a.properties[d];if(Array.isArray(b)){for(let a of b)if(Array.isArray(a)&&a.length>1&&"‣"===a[0]){let b=a[1]?.[0];Array.isArray(b)&&b.length>1&&"p"===b[0]&&c.add(b[1])}}}}return c};async addSignedUrls({recordMap:a,contentBlockIds:b,ofetchOptions:c={}}){a.signed_urls={},b||(b=r(a));let d=b.flatMap(b=>{let c=a.block[b]?.value;if(c&&("pdf"===c.type||"audio"===c.type||"image"===c.type&&c.file_ids?.length||"video"===c.type||"file"===c.type||"page"===c.type)){let a="page"===c.type?c.format?.page_cover:c.properties?.source?.[0]?.[0];if(a&&(a.includes("secure.notion-static.com")||a.includes("prod-files-secure")||a.includes("attachment:")))return{permissionRecord:{table:"block",id:c.id},url:a}}return[]});if(d.length>0)try{let{signedUrls:b}=await this.getSignedFileUrls(d,c);if(b.length===d.length)for(let[c,e]of d.entries()){let d=b[c];if(!d)continue;let f=e.permissionRecord.id;f&&(a.signed_urls[f]=d)}}catch(a){console.warn("NotionAPI getSignedfileUrls error",a)}}async getPageRaw(a,{ofetchOptions:b,chunkLimit:c=100,chunkNumber:d=0}={}){let e=q(a);if(!e)throw Error(`invalid notion pageId "${a}"`);return this.fetch({endpoint:"loadPageChunk",body:{pageId:e,limit:c,chunkNumber:d,cursor:{stack:[]},verticalColumns:!1},ofetchOptions:b})}async getCollectionData(a,b,c,{limit:d=999,searchQuery:e="",userTimeZone:f=this._userTimeZone,loadContentCover:g=!0,ofetchOptions:h}={}){let i=c?.type,j="board"===i,k=j?c?.format?.board_columns_by:c?.format?.collection_group_by,l=[];c?.format?.property_filters&&(l=c.format?.property_filters.map(a=>({filter:a?.filter?.filter,property:a?.filter?.property}))),c?.query2?.filter?.filters&&l.push(...c.query2.filter.filters);let m={type:"reducer",reducers:{collection_group_results:{type:"results",limit:d,loadContentCover:g}},sort:[],...c?.query2,filter:{filters:l,operator:"and"},searchQuery:e,userTimeZone:f};if(k){let a=c?.format?.board_columns||c?.format?.collection_groups||[],b=[j?"board":"group_aggregation","results"],g={checkbox:"checkbox_is",url:"string_starts_with",text:"string_starts_with",select:"enum_is",multi_select:"enum_contains",created_time:"date_is_within",undefined:"is_empty"},h={};for(let c of a){let{property:a,value:{value:e,type:f}}=c;for(let c of b){let b="results"===c?{type:c,limit:d}:{type:"aggregation",aggregation:{aggregator:"count"}},i=void 0===e,j=e?.range,k=i?"uncategorized":j?e.range?.start_date||e.range?.end_date:e?.value||e,l=!i&&(j||e?.value||e);h[`${c}:${f}:${k}`]={...b,filter:{operator:"and",filters:[{property:a,filter:{operator:i?"is_empty":g[f],...!i&&{value:{type:"exact",value:l}}}}]}}}}m={type:"reducer",reducers:{[j?"board_columns":`${i}_groups`]:{type:"groups",version:"v2",groupBy:k,...c?.query2?.filter&&{filter:c?.query2?.filter},groupSortPreference:a.map(a=>({property:a?.property,value:{type:a?.value?.type,value:a?.value?.value}})),limit:d},...h},...c?.query2,searchQuery:e,userTimeZone:f,filter:{filters:l,operator:"and"}}}return this.fetch({endpoint:"queryCollection",body:{collection:{id:a},collectionView:{id:b},source:{type:"collection",id:a},loader:m},ofetchOptions:{timeout:6e4,...h,params:{src:"initial_load"}}})}async getUsers(a,b){return this.fetch({endpoint:"getRecordValues",body:{requests:a.map(a=>({id:a,table:"notion_user"}))},ofetchOptions:b})}async getBlocks(a,b){return this.fetch({endpoint:"syncRecordValuesMain",body:{requests:a.map(a=>({table:"block",id:a,version:-1}))},ofetchOptions:b})}async getSignedFileUrls(a,b){return this.fetch({endpoint:"getSignedFileUrls",body:{urls:a},ofetchOptions:b})}async search(a,b){let c={type:"BlocksInAncestor",source:"quick_find_public",ancestorId:q(a.ancestorId),sort:{field:"relevance"},limit:a.limit||20,query:a.query,filters:{isDeletedOnly:!1,isNavigableOnly:!1,excludeTemplates:!0,requireEditPermissions:!1,includePublicPagesWithoutExplicitAccess:!0,ancestors:[],createdBy:[],editedBy:[],lastEditedTime:{},createdTime:{},...a.filters}};return this.fetch({endpoint:"search",body:c,ofetchOptions:b})}async fetch({endpoint:a,body:b,ofetchOptions:c,headers:d}){let e={...d,...this._ofetchOptions?.headers,...c?.headers,"Content-Type":"application/json"};return this._authToken&&(e.cookie=`token_v2=${this._authToken}`),this._activeUser&&(e["x-notion-active-user-header"]=this._activeUser),af(`${this._apiBaseUrl}/${a}`,{method:"POST",mode:"no-cors",...this._ofetchOptions,...c,body:b,headers:e})}}({activeUser:process.env.NOTION_ACTIVE_USER,authToken:process.env.NOTION_TOKEN_V2});async function aj({params:a}){let e=a.projectId,f=await ai.getPage(e);return(console.log(f),f)?(0,b.jsxs)("div",{children:[(0,b.jsx)(d.default,{href:"/projects",children:"← Back to Projects"}),(0,b.jsx)(c.default,{recordMap:f})]}):(0,b.jsx)("div",{children:"Loading..."})}}];

//# sourceMappingURL=HandS_frontend_0121e15d._.js.map